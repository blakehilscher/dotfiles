#!/usr/bin/env ruby
# encoding: UTF-8

command = ARGV[0]

def url_for_command(command)
  git_url = `git config --get remote.origin.url`
  branch = `git branch | grep '*'`.gsub('* ','').strip.rstrip
  url = git_url.split(':').last.gsub('.git','').strip.rstrip
  
  case command.to_s.to_sym
  when :pr        then "http://github.com/#{url}/compare/#{branch}?expand=1"
  when :pulls     then "http://github.com/#{url}/pulls"
  else 
    "http://github.com/#{url}/tree/#{branch}"
  end
end

url = url_for_command(command)

puts "open '#{url}'"
`open '#{url}'`